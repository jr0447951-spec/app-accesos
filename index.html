function generarMensaje() {

  if (!selectedSiteID) {
    alert("Debe seleccionar un sitio");
    return;
  }

  const sitioSeleccionado = sitios.find(s => s.SiteID === selectedSiteID);
  if (!sitioSeleccionado) {
    alert("Sitio no válido");
    return;
  }

  const actividadSel = document.getElementById("actividad").value;

  const idxPrincipal = document.getElementById("tecnicoPrincipal").value;
  const tecnicoPrincipal = tecnicos[idxPrincipal];

  const veh = vehiculos[document.getElementById("vehiculo").value];

  /* ===== LISTA DE TECNICOS ===== */
  let listaTecnicos = "";
  listaTecnicos += `${tecnicoPrincipal.TECNICO}\t${tecnicoPrincipal.DUI}\n`;

  seleccionTecnicosAdicionales.forEach(t => {
    listaTecnicos += `${t.TECNICO}\t${t.DUI}\n`;
  });

  const mensaje =
`BUEN DIA
SU AYUDA CON EL SIGUIENTE ACCESO POR FAVOR :
▬▬▬▬▬▬▬▬▬▬
ID:${sitioSeleccionado.SiteID}
NOMBRE: ${sitioSeleccionado['Nombre de Sitio']}
PROPIETARIO: ${sitioSeleccionado.Torrero}
Nombre Torrero ${sitioSeleccionado['Nombre Torrero']}
▬▬▬▬▬▬▬▬▬▬
ACTIVIDAD: ${actividadSel}
▬▬▬▬▬▬▬▬▬▬
TECNICO PRINCIPAL/DUI
${listaTecnicos.trim()}
▬▬▬▬▬▬▬▬▬▬
Placa: ${veh.Placa}
Marca: ${veh.Marca}
Modelo: ${veh.Modelo}
Color: ${veh.Color}
▬▬▬▬▬▬▬▬▬▬
TELEFONO: ${tecnicoPrincipal.TELEFONO}
CORREO: ${tecnicoPrincipal.CORREO} tecnicossv@celectcac.com
`;

  document.getElementById("resultado").value = mensaje;

  navigator.clipboard.writeText(mensaje)
    .then(() => alert("Mensaje copiado al portapapeles"))
    .catch(() => alert("No se pudo copiar"));
}



